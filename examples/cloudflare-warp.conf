# Пример конфигурации WireGuard для подключения через Relay
# ==========================================================
#
# Этот файл показывает, как настроить WireGuard клиент для работы
# через relay-сервер вместо прямого подключения к CloudFlare WARP.
#
# ВАЖНО: Замените <RELAY_SERVER_IP> на IP адрес вашего relay-сервера
#

[Interface]
# Приватный ключ вашего устройства (генерируется WireGuard клиентом)
PrivateKey = <ВАШ_ПРИВАТНЫЙ_КЛЮЧ>

# IP адрес в сети WARP (обычно выдается автоматически)
Address = 172.16.0.2/32

# DNS серверы CloudFlare
DNS = 1.1.1.1, 1.0.0.1

# MTU для оптимальной производительности
MTU = 1280

[Peer]
# Публичный ключ CloudFlare WARP (фиксированный)
PublicKey = bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=

# Диапазоны IP для маршрутизации через VPN
AllowedIPs = 0.0.0.0/0

# ВАЖНО: Здесь указывается IP вашего relay-сервера, а не engage.cloudflareclient.com
Endpoint = <RELAY_SERVER_IP>:4500

# Периодический keepalive (рекомендуется для NAT)
PersistentKeepalive = 25

# =============================================================================
# ПРИМЕР ДЛЯ СОБСТВЕННОГО WIREGUARD СЕРВЕРА
# =============================================================================
#
# Если вы используете собственный WireGuard сервер, конфигурация будет такой:
#
# [Interface]
# PrivateKey = <ВАШ_ПРИВАТНЫЙ_КЛЮЧ>
# Address = 10.0.0.2/24
# DNS = 1.1.1.1
#
# [Peer]
# PublicKey = <ПУБЛИЧНЫЙ_КЛЮЧ_СЕРВЕРА>
# AllowedIPs = 0.0.0.0/0
# Endpoint = <RELAY_SERVER_IP>:51820  # Порт вашего WG сервера
# PersistentKeepalive = 25
#

# =============================================================================
# КАК ПОЛУЧИТЬ КЛЮЧИ ДЛЯ CLOUDFLARE WARP
# =============================================================================
#
# 1. Установите официальный клиент WARP:
#    - Windows/Mac: https://1.1.1.1/
#    - Linux: wgcf (https://github.com/ViRb3/wgcf)
#
# 2. Для Linux используйте wgcf:
#    wgcf register
#    wgcf generate
#
# 3. Ключи будут в файле wgcf-profile.conf
#
# 4. Используйте приватный ключ из этого файла в конфигурации выше
#

# =============================================================================
# ПРОВЕРКА ПОДКЛЮЧЕНИЯ
# =============================================================================
#
# После настройки проверьте подключение:
#
# 1. Запустите WireGuard
# 2. Проверьте IP: curl https://ifconfig.me
#    (должен показать IP CloudFlare)
#
# 3. Проверьте DNS: dig +short cloudflare.com
#    (должен вернуть IP)
#
# 4. Проверьте пинг: ping 1.1.1.1
#
